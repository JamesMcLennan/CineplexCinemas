@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    var previousCineplex = "None";
    DateTime DayToDisplay = new DateTime(1996, 05, 10);
}
<table class="table borderless">
    <tbody>
        @foreach (var item in Model)
        {
            DayToDisplay = item.Session.SessionDateTime;
            break;
        }
        @foreach (var item in Model)
        {
            if (!item.Cineplex.Location.Equals(previousCineplex))
            {
                previousCineplex = item.Cineplex.Location;

                   <tr>
                        <td>
                            <h3>@previousCineplex</h3>
                        </td>
                   </tr>
                DayToDisplay = item.Session.SessionDateTime;
                    <tr>
                        <td>
                            <h3>@DayToDisplay.DayOfWeek, @DayToDisplay.Day/@DayToDisplay.Month/@DayToDisplay.Year</h3>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            @item.Session.FilmMovie.Title |
                            @{string time = item.Session.SessionDateTime.ToString("hh:mm tt");
                            }@time

                            <br />
                        </td>
                    </tr>
               }
               else
               {
               if (!item.Session.SessionDateTime.DayOfWeek.Equals(DayToDisplay.DayOfWeek))
               {
                    DayToDisplay = item.Session.SessionDateTime;
                    <tr>
                        <td>
                            <h3>@DayToDisplay.DayOfWeek, @DayToDisplay.Day/@DayToDisplay.Month/@DayToDisplay.Year</h3>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            @item.Session.FilmMovie.Title |
                            @{string time = item.Session.SessionDateTime.ToString("hh:mm tt");
                            }@time

                            @Html.ActionLink("Book Now!", "sessionDetails", "Bookings", new { cineplexId = item.CineplexId, movieId = item.MovieId, sessionId = item.SessionId})<br />
                        </td>
                    </tr>
                }
                else
                {
                    <tr>
                        <td>
                            @item.Session.FilmMovie.Title |
                            @{string time = item.Session.SessionDateTime.ToString("hh:mm tt");
                            }@time

                            @Html.ActionLink("Book Now!", "sessionDetails", "Bookings", new { cineplexId = item.CineplexId, movieId = item.MovieId, sessionId = item.SessionId })<br />
                        </td>
                    </tr>
                }
            }
        }

    </tbody>
</table>



