@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    var previousCineplex = "None";
    DateTime DayToDisplay = new DateTime(1996, 05, 10);
}
<table class="table">
    <tbody>
        @foreach (var item in Model)
        {
            DayToDisplay = item.Session.SessionDateTime;
            break;
        }
        @foreach (var item in Model)
        {
            if (!item.Cineplex.Location.Equals(previousCineplex))
            {
                previousCineplex = item.Cineplex.Location;

                   <tr>
                        <td>
                            <h3>@previousCineplex</h3>
                        </td>
                   </tr>
                        DayToDisplay = item.Session.SessionDateTime;
                    <tr>
                        <td>
                            <h3>@DayToDisplay.DayOfWeek</h3>
                        </td>
                    </tr>
                    <tr>
                        <td>
                             Movie: @item.Session.FilmMovie.Title<br />
                             Day: @item.Session.SessionDateTime.DayOfWeek @item.Session.SessionDateTime.Day/@item.Session.SessionDateTime.Month/@item.Session.SessionDateTime.Year<br />
                             Time: @item.Session.SessionDateTime.TimeOfDay
                                   
                        </td>
                    </tr>
            }
            else
            {   
                if (!item.Session.SessionDateTime.DayOfWeek.Equals(DayToDisplay.DayOfWeek))
                {
                    DayToDisplay = item.Session.SessionDateTime;
                    <tr>
                        <td>
                            <h3>@DayToDisplay.DayOfWeek</h3>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Movie: @item.Session.FilmMovie.Title<br />
                            Day: @item.Session.SessionDateTime.DayOfWeek @item.Session.SessionDateTime.Day/@item.Session.SessionDateTime.Month/@item.Session.SessionDateTime.Year<br />
                            Time: @item.Session.SessionDateTime.TimeOfDay
                        </td>
                    </tr>
                }
                else
                {
                    <tr>
                        <td>
                            Movie: @item.Session.FilmMovie.Title<br />
                            Day: @item.Session.SessionDateTime.DayOfWeek @item.Session.SessionDateTime.Day/@item.Session.SessionDateTime.Month/@item.Session.SessionDateTime.Year<br />
                            Time: @item.Session.SessionDateTime.TimeOfDay
                        </td>
                    </tr>
                }
            }
        }

    </tbody>
</table>



